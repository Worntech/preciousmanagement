{% extends "web/base.html" %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between mb-3">
    <h3 class="text-warning">Additions History</h3>
    <a href="{% url 'addition_create' %}" class="btn btn-sm btn-warning text-white">+ New Addition</a>
  </div>
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Product</th><th>Quantity</th><th>Status</th><th>By</th><th>Created</th><th></th>
      </tr>
    </thead>
    <tbody>
      {% for a in additions %}
      <tr>
        <td>{{ a.product.name }}</td>
        <td>{{ a.quantity }}</td>
        <td>
          {% if a.status == "pending" %}
            <span class="badge bg-warning">Pending</span>
          {% elif a.status == "correct" %}
            <span class="badge bg-success">Correct</span>
          {% else %}
            <span class="badge bg-danger">Incorrect</span>
          {% endif %}
        </td>
        <td>{{ a.added_by|default:"â€”" }}</td>
        <td>{{ a.created_at|date:"Y-m-d H:i" }}</td>
        <td>
          {% if a.status == "pending" %}
            <a href="{% url 'addition_mark' a.pk 'correct' %}" class="btn btn-sm btn-success">It is Correct</a>
            <a href="{% url 'addition_mark' a.pk 'incorrect' %}" class="btn btn-sm btn-danger">Incorrect</a>
          {% endif %}
          <!-- DELETE FORM -->
  <form action="{% url 'addition_delete' a.pk %}" method="post" style="display:inline;">
    {% csrf_token %}
    <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure you want to delete this addition?');">
      Delete
    </button>
  </form>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="6">No additions yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
