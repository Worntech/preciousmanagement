{% extends "web/base.html" %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="text-warning">Products</h3>
    <a href="{% url 'product_create' %}" class="btn btn-sm btn-warning text-white">+ New Product</a>
  </div>
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Name</th><th>Unit</th><th>Stock</th><th>Active</th><th></th>
      </tr>
    </thead>
    <tbody>
      {% for p in products %}
      <tr>
        <td>{{ p.name }}</td>
        <td>{{ p.get_unit_display }}</td>
        <td>{{ p.stock }}</td>
        <td>{% if p.is_active %}✅{% else %}❌{% endif %}</td>
        <td>
          <a href="{% url 'product_update' p.pk %}" class="btn btn-sm btn-outline-warning">Edit</a>
          <!-- DELETE FORM -->
  <form action="{% url 'product_delete' p.pk %}" method="post" style="display:inline;">
    {% csrf_token %}
    <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure?');">
      Delete
    </button>
  </form>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="5">No products yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
